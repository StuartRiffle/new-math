\documentclass[12pt]{article}
\usepackage{amsmath,amssymb,amsthm,amsfonts}
\usepackage{mathtools}
\usepackage{enumitem}
\usepackage{hyperref}
\usepackage{cleveref}
\usepackage[margin=1in]{geometry}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{xcolor}
\usepackage{color}
\usepackage{listings}
\usepackage{tabularx}

\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
    pdftitle={Residue Environment Analysis for Collatz-like Dynamics},
    pdfpagemode=FullScreen,
}

\theoremstyle{plain}
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{conjecture}[theorem]{Conjecture}
\newtheorem{verification}[theorem]{Verification}

\theoremstyle{definition}
\newtheorem{definition}[theorem]{Definition}
\newtheorem{example}[theorem]{Example}
\newtheorem{remark}[theorem]{Remark}

\DeclareMathOperator{\lcm}{lcm}
\DeclareMathOperator{\li}{li}
\DeclareMathOperator{\Mod}{mod}
\DeclareMathOperator{\ord}{ord}
\DeclareMathOperator{\Res}{Res}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\Vol}{Vol}

\newcommand{\Z}{\mathbb{Z}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\PP}{\mathbb{P}}
\newcommand{\eps}{\varepsilon}
\newcommand{\vphi}{\varphi}
\newcommand{\ph}{\phi}

\lstdefinelanguage{lean}{
  keywords={
    def, theorem, lemma, proposition, corollary, example,
    by, enter, have, let, assume, show, calc, exact,
    if, then, else, in, class, instance, structure, inductive,
    rw, simp, intro, apply, unfold, exact, sorry, trivial,
    Prop, Type, Sort, Nat, ℕ, Int, ℤ, Fin, Odd,
    open, import, set_option
  },
  sensitive=true,
  comment=[l]{--},
  morestring=[b]",
  morestring=[s]'/
}


\definecolor{listingbg}{HTML}{F0F8FF}
\lstset{
  language=lean,
  inputencoding=utf8,
  extendedchars=true,
  basicstyle=\ttfamily\small,
  backgroundcolor=\color{listingbg},
  keywordstyle=\color{blue}\bfseries,
  commentstyle=\color{gray}\itshape,
  stringstyle=\color{teal},
  numbers=left,
  numberstyle=\tiny,
  stepnumber=1,
  numbersep=8pt,
  tabsize=2,
  keepspaces=true, 
  columns=flexible,
  breaklines=true,
  breakatwhitespace=true,
  showstringspaces=false,
  frame=single,
  captionpos=b,
  literate=
    % arrows & logical connectives
    {→}{{$\to$}}1
    {←}{{$\leftarrow$}}1
    {↔}{{$\leftrightarrow$}}1
    {↦}{{$\mapsto$}}1
    {∧}{{$\land$}}1
    {∨}{{$\lor$}}1
    {¬}{{$\neg$}}1
    % quantifiers & existence
    {∀}{{$\forall$}}1
    {∃}{{$\exists$}}1
    % relations
    {≤}{{$\le$}}1
    {≥}{{$\ge$}}1
    {≠}{{$\neq$}}1
    {≡}{{$\equiv$}}1
    {∣}{{$\mid$}}1
    % brackets for tuples/angle‐notation
    {⟨}{{$\langle$}}1
    {⟩}{{$\rangle$}}1
    % math sets & number‐systems
    {ℕ}{{$\mathbb{N}$}}1
    {ℤ}{{$\mathbb{Z}$}}1
    {ℚ}{{$\mathbb{Q}$}}1
    {ℝ}{{$\mathbb{R}$}}1
    {ℂ}{{$\mathbb{C}$}}1
    % tactic bullet
    {·}{{$\cdot$}}1
    % common type‐variable Greek letters
    {α}{{$\alpha$}}1
    {β}{{$\beta$}}1
    {γ}{{$\gamma$}}1
    {δ}{{$\delta$}}1
    {ε}{{$\varepsilon$}}1
    {ζ}{{$\zeta$}}1
    {η}{{$\eta$}}1
    {θ}{{$\theta$}}1
    {ι}{{$\iota$}}1
    {κ}{{$\kappa$}}1
    {λ}{{$\lambda$}}1
}

\title{Residue Environment Analysis for Collatz-like Dynamics}
\author{Stuart Riffle}
\date{\today}

\begin{document}
\maketitle
\begin{abstract}
\end{abstract}

\section{Introduction}
    \subsection{Summary}
    \subsection{Sections}

\section{Introduction}
    \subsection{Definitions}
        \begin{definition}[Odd core]
        The 2-adic \emph{odd core} of an even number is what remains after dividing out all powers of two. For example, the odd core of 20 is 5.
        \end{definition}

    \subsection{Synopsis}

\section{Welcome to Residue Space}
\section{Conclusion}


\section{Introduction}
\subsection{The Collatz Conjecture and the Syracuse Function}

The Collatz conjecture, first posed by Lothar Collatz in 1937, is one of the most famous unsolved problems in mathematics. It concerns the behavior of a simple iterative function, $C(n)$, defined on the set of positive integers $\mathbb{N}$. The function is defined as:
\[
C(n) = 
\begin{cases}
\frac{n}{2} & \text{if } n \text{ is even}, \\
3n+1        & \text{if } n \text{ is odd}.
\end{cases}
\]
The conjecture states that for any starting integer $n \in \mathbb{N}$, the sequence of iterates $C^0(n) = n,\, C^1(n) = C(n),\, C^2(n) = C(C(n)),\, \ldots$ will eventually reach the integer $1$. Upon reaching $1$, the sequence enters the trivial cycle $(4, 2, 1)$. Despite its simple statement, the conjecture has resisted proof for decades. The sequence of iterates, often called a \emph{Collatz trajectory} or \emph{hailstone sequence}, exhibits quasi-chaotic behavior, making predictions about its long-term dynamics exceedingly difficult.

For analysis focused on the dynamics of odd integers, it is conventional to use a modified function, often called the \emph{Syracuse function} or the ``shortcut'' map, which we denote as $T\colon \mathbb{N}_{\text{odd}} \to \mathbb{N}_{\text{odd}}$. This function encapsulates one ``odd step'' ($3n+1$) followed by all subsequent ``even steps'' ($n/2$) into a single operation:
\[
T(n) = \frac{3n+1}{2^k}
\]
where $k$ is the unique positive integer such that the result is an odd integer. The Collatz conjecture is equivalent to the statement that for any odd integer $n > 1$, the sequence of iterates of $T$ eventually reaches $1$.

\subsection{An Alternative Perspective: The Local Arithmetic Environment}

The persistent difficulty of the Collatz problem suggests that the conventional view, which primarily tracks the magnitude of $n$, may obscure the underlying mechanisms governing its trajectory. The magnitude of $n$ can fluctuate dramatically and unpredictably, offering little insight into the structure of the problem.

This paper proposes an alternative perspective: that the integer $n$ is best understood not as a scalar magnitude but as a pointer to a rich set of arithmetic properties in its local neighborhood. The behavior of $n$ under the Syracuse map is not an isolated event but is deeply constrained by the properties of its immediate even neighbors, $n-1$ and $n+1$. The prime factorization and 2-adic structure of these neighbors constitute a ``local arithmetic environment'' that provides a more informative state space for analyzing the problem. This approach shifts the focus from ``how large is $n$?'' to ``what is the arithmetic context of $n$?''

\subsection{Summary of Contributions and Paper Structure}

This paper introduces a formal framework to investigate the structure of the Collatz graph through the lens of this local arithmetic environment. The primary contributions are:
\begin{itemize}
    \item \textbf{The Neighbor Odd Core Fingerprint}: A formal construct that captures the essential 2-adic properties of an odd integer's immediate neighbors.
    \item \textbf{The Lowest-$k$ Root Walk}: A novel, deterministic traversal on the odd integers, distinct from the Collatz map, which is derived directly from the fingerprint.
    \item \textbf{Seed Equivalence Classes}: The demonstration that the Lowest-$k$ Root Walk partitions the odd integers into equivalence classes, each rooted in a ``seed'' value.
    \item \textbf{Recursive Doubling Cascades}: The empirical discovery and algebraic explanation of highly ordered, recursive structures within Collatz stopping time groups, which appear to be generated by a deterministic process linked to their seed.
    \item \textbf{A Structural Hypothesis}: The formulation of a hypothesis that the Collatz problem can be reduced to analyzing the behavior of a finite set of these seed values.
\end{itemize}

The paper is structured as follows: Section~2 provides the formal definitions for the analytical tools used. Section~3 introduces the Lowest-$k$ Root Walk and the resulting partition of odd integers. Section~4 presents a detailed case study of the recursive structures observed in the data. Section~5 connects these findings to stopping time analysis and presents the central conjectures. Finally, Section~6 concludes with a summary and outlines directions for future research.

\section{The Arithmetic Fingerprint of an Odd Integer}

To analyze the local environment of an integer, we must first formalize the concepts of its ``evenness'' and its essential ``odd part.''

\subsection{Formal Definitions: 2-adic Valuation and the Odd Core}

The following standard definitions from number theory are foundational to our analysis.

\begin{definition}[2-adic Valuation]
For any integer $n \in \mathbb{N}$, the \emph{2-adic valuation} of $n$, denoted $\nu_2(n)$, is the exponent of the highest power of $2$ that divides $n$. Formally, if $n = 2^k \cdot m$ where $m$ is an odd integer, then $\nu_2(n) = k$.
\end{definition}

\begin{definition}[Odd Core]
For any integer $n \in \mathbb{N}$, the \emph{odd core} of $n$, denoted $\operatorname{oc}(n)$, is the largest odd divisor of $n$. Formally,
\[
\operatorname{oc}(n) = \frac{n}{2^{\nu_2(n)}}.
\]
For any $n \in \mathbb{N}_{\text{odd}}$, it follows that $\nu_2(n) = 0$ and $\operatorname{oc}(n) = n$.
\end{definition}

Using these definitions, the Syracuse function $T(n)$ can be expressed precisely as $T(n) = \operatorname{oc}(3n+1)$. The number of divisions by $2$ in a single step is given by $k = \nu_2(3n+1)$.

\subsection{The Neighbor Odd Core Fingerprint $F(n)$}

The central analytical construct of this paper is a data structure that captures the 2-adic properties of an odd integer's immediate even neighbors.

\begin{definition}[Neighbor Odd Core Fingerprint]
For any odd integer $n \in \mathbb{N}_{\text{odd}}$ where $n > 1$, the \emph{Neighbor Odd Core Fingerprint} of $n$, denoted $F(n)$, is the ordered pair of tuples describing the 2-adic properties of its even neighbors, $n-1$ and $n+1$:
\[
F(n) = \left( \left( \nu_2(n-1),\, \operatorname{oc}(n-1) \right),\, \left( \nu_2(n+1),\, \operatorname{oc}(n+1) \right) \right).
\]
We refer to $\nu_2(n \pm 1)$ as the \emph{neighbor valuation} and $\operatorname{oc}(n \pm 1)$ as the \emph{neighbor core}.
\end{definition}

\begin{example}
Consider the odd number $n = 73$:

\begin{align*}
n-1 &= 72 = 8 \cdot 9 = 2^3 \cdot 9, \quad \text{so } (\nu_2(72),\, \operatorname{oc}(72)) = (3, 9). \\
n+1 &= 74 = 2 \cdot 37 = 2^1 \cdot 37, \quad \text{so } (\nu_2(74),\, \operatorname{oc}(74)) = (1, 37).
\end{align*}
Therefore,
\[
F(73) = ((3, 9),\ (1, 37)).
\]
\end{example}

This fingerprint is not merely descriptive; it is predictive. The application of the Syracuse function involves calculating $3n + 1$. This value is arithmetically linked to the neighbors $n-1$ and $n+1$ by the identities $3n+1 = 3(n-1) + 4$ and $3n+1 = 3(n+1) - 2$. The 2-adic valuation of $3n + 1$, which determines the number of divisions by $2$ in the Collatz sequence, is directly constrained by the valuations of the neighbors. For instance, if $\nu_2(n-1) = k > 2$, then $3(n-1)$ is divisible by $2^k$, while $4$ is divisible only by $2^2$. The sum $3(n-1) + 4$ is therefore divisible by exactly $2^2$, forcing $\nu_2(3n+1) = 2$. The fingerprint thus encodes the preconditions that govern the subsequent step in the Collatz trajectory.

\subsection{Modular Properties and Correlations within the Fingerprint}

The data presented in the research materials often includes an extended version of this fingerprint, detailing the residues of the neighbor cores modulo a set of small primes (e.g., $3, 5, 7, \ldots$). While our primary definition of $F(n)$ is sufficient for the main arguments of this paper, this modular information reveals a deeper layer of structure.

The data suggests that numbers with the same Collatz stopping distance often share remarkable similarities in their extended modular fingerprints. For example, within the group of numbers with stopping distance $76$, both $n=2463$ and $n=4927$ have a neighbor core of $77$ (from $n+1$ and $n+1$ respectively). The modular residue vectors associated with this core are identical in both cases. This consistency implies that the long-term behavior of a number, such as its total stopping time, is encoded in these local modular properties, reinforcing the thesis that the local environment is paramount.

\section{The Lowest-$k$ Root Walk and Seed Equivalence Classes}

The Neighbor Odd Core Fingerprint allows us to define a new kind of traversal on the graph of odd integers, one that is entirely deterministic and distinct from the Collatz map itself.

\subsection{Defining the Root Walk Graph $G_R$}

This traversal is based on a simple rule: from any odd number $n$, step to the odd core of the neighbor that is ``less even'' (i.e., has a smaller 2-adic valuation).

\begin{definition}[Lowest-$k$ Root Walk]
For any odd integer $n \in \mathbb{N}_{\text{odd}}$ where $n > 1$, the \emph{Lowest-$k$ Root Walk} function $R: \mathbb{N}_{\text{odd}} \setminus \{1\} \to \mathbb{N}_{\text{odd}}$ is defined by selecting the neighbor core corresponding to the neighbor with the smaller 2-adic valuation:
\[
R(n) =
\begin{cases}
\operatorname{oc}(n-1) & \text{if } \nu_2(n-1) < \nu_2(n+1), \\
\operatorname{oc}(n+1) & \text{if } \nu_2(n+1) < \nu_2(n-1).
\end{cases}
\]
\end{definition}

This function is well-defined for all odd $n > 1$. For any such $n$, either $n-1$ or $n+1$ is divisible by $2$ but not $4$. If $n \equiv 1 \pmod{4}$, then $n-1$ is divisible by $4$, so $\nu_2(n-1) \geq 2$, while $\nu_2(n+1) = 1$. Thus, $R(n) = \operatorname{oc}(n+1)$. If $n \equiv 3 \pmod{4}$, then $\nu_2(n-1) = 1$ and $\nu_2(n+1) \geq 2$, so $R(n) = \operatorname{oc}(n-1)$.

The repeated application of this function defines a directed graph $G_R = (\mathbb{N}_{\text{odd}},\, E_R)$, where the edges are $E_R = \{ (n, R(n)) \mid n \in \mathbb{N}_{\text{odd}},\, n > 1 \}$.

\subsection{Seed Values and the Partition of $\mathbb{N}_{\text{odd}}$ into Equivalence Classes $E_s$}

A crucial property of the function $R(n)$ is that its output is always smaller than its input for $n > 1$.

\begin{itemize}
    \item If $n \equiv 1 \pmod{4}$, $R(n) = \operatorname{oc}(n+1) = \frac{n+1}{2^k}$ for some $k \geq 1$. Since $n > 1$, $\frac{n+1}{2^k} \leq \frac{n+1}{2} < n$.
    \item If $n \equiv 3 \pmod{4}$, $R(n) = \operatorname{oc}(n-1) = \frac{n-1}{2^k}$ for some $k \geq 1$. Since $k \geq 1$, $\frac{n-1}{2^k} < n$.
\end{itemize}

Since any sequence of iterates $R^k(n)$ is a strictly decreasing sequence of positive integers, it must terminate. This proves that the graph $G_R$ is a forest of directed trees, where each path eventually leads to a terminal node (a sink). This validates the following definitions.

\begin{definition}[Seed Value and Equivalence Class]
A \emph{Seed Value} $s$ is an odd integer that is a terminal node in the graph $G_R$. The \emph{Lowest-$k$ Equivalence Class} $E_s$ is the set of all odd integers $n$ such that the sequence of iterates $R^k(n)$ terminates at the seed $s$:
\[
E_s = \left\{ n \in \mathbb{N}_{\text{odd}} \mid \exists k \in \mathbb{N}_0 \text{ such that } R^k(n) = s \right\}.
\]
\end{definition}

This framework imposes a new, hierarchical structure on the odd integers, partitioning them into disjoint sets based on their root walk destination.


\newpage


\begin{thebibliography}{9}

\end{thebibliography}

\end{document}

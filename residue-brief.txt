# Core Residue Environment (CRE): Technical Specification

The "residue environment" is a matrix made from the prime residue vectors of a number n, it's odd neighbors, and the 2-adic "odd cores" of even neighbors. Considered together they reveal arithmetic structure of numbers.

## 1. Definitions
* **Subject `n`**: An odd integer, `n > 1`.
* **Prime Moduli Set P_m**: The first `m` primes `{p_1, p_2, ..., p_m}` where `p_1=2`.
* **Prime Residue Vector (PRV)**: For an integer `k`, `PRV_m(k) = [k (mod p_1), ..., k (mod p_m)]^T`.
* **2-adic Valuation ν_2(k)**: The exponent of the highest power of 2 that divides `k`.
* **Odd Core Operator oc(k)**: `oc(k) = k / 2^(ν_2(k))`.
* **Environment Set E_n**: The 5-tuple `{n-2, oc(n-1), n, oc(n+1), n+2}`.
* **Core Residue Environment Matrix M_m(n)**: An `m x 5` matrix whose columns are the PRVs of the elements of E_n.
    `M_m(n) = [ PRV_m(n-2) | PRV_m(oc(n-1)) | PRV_m(n) | PRV_m(oc(n+1)) | PRV_m(n+2) ]`.

## 2. Invariant Structural Properties
* **Parity Signature**: The first row (residues mod 2) is always `[1, 1, 1, 1, 1]`.
* **Arithmetic Progression**: For any row `i > 1` (mod p_i), columns 1, 3, and 5 form the progression `(x-2, x, x+2)` where `x = n (mod p_i)`.
* **2-adic Asymmetry**: `min(ν_2(n-1), ν_2(n+1)) = 1`.
    * If `n ≡ 1 (mod 4)`, then `ν_2(n-1) ≥ 2` and `ν_2(n+1) = 1`.
    * If `n ≡ 3 (mod 4)`, then `ν_2(n-1) = 1` and `ν_2(n+1) ≥ 2`.

## 3. Key Correlations & Information Extraction
* **Factor Identification**: A prime `p` divides an element `E_n[j]` iff `M(n)[p, j] = 0`.
* **Prime Factor Encoding**: If `M(n)[p, 3] = 0` (i.e., `p` divides `n`), then for that row, `M(n)[p, 1] ≡ -2 (mod p)` and `M(n)[p, 5] ≡ 2 (mod p)`.
* **Odd Core Algebraic Link**: A direct relationship exists between `v = oc(n-1)` and `u = oc(n+1)`.
    * If `ν_2(n-1) = 1`, then `v` and `(n+1)/2` are consecutive integers.
    * If `ν_2(n+1) = 1`, then `u` and `(n-1)/2` are consecutive integers.
* **Distinguishing `p` from `p^2`**: While `M(p)[p,3]` and `M(p^2)[p,3]` are both 0, other columns differ. Notably, `M(p^2)[p, 2] ≡ oc(p-1) * oc(p+1) (mod p)`.

## 4. Diagnostic Signatures (Fingerprints)
* **Prime `n=q`**: `M(q)[p, 3] ≠ 0` for all primes `p < q`.
* **Twin Prime `(n, n+2)`**: `M(n)[p, 3] ≠ 0` and `M(n)[p, 5] ≠ 0` up to a relevant depth, indicating neither `n` nor `n+2` have small prime factors.
* **Highly Composite Numbers**: A high density of zeros in the initial rows of column 3 (a "noisy" column) indicates `n` has many small prime factors.
* **Mersenne Form `n = 2^k - 1`**: `oc(n+1) = 1`. The fourth column of `M(n)` is a vector of ones.
* **Fermat Form `n = 2^k + 1`**: `oc(n-1) = 1`. The second column of `M(n)` is a vector of ones.

---
